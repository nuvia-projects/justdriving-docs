"use strict";(globalThis.webpackChunkjustdriving=globalThis.webpackChunkjustdriving||[]).push([[5811],{3505:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"architecture/external","title":"External systems","description":"The Just Driving platform can integrate with several categories of external systems to support real-world operations like payments, messaging, and bookkeeping. This section describes the integration points at a high level so you can plug in specific providers (Stripe, Twilio, local SMS gateways, accounting tools, etc.) as needed.","source":"@site/docs/architecture/external.md","sourceDirName":"architecture","slug":"/architecture/external","permalink":"/docs/architecture/external","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/architecture/external.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4},"sidebar":"tutorialSidebar","previous":{"title":"Frontend structure","permalink":"/docs/architecture/frontend"},"next":{"title":"Deployment & hosting","permalink":"/docs/architecture/deployment"}}');var r=i(4848),t=i(8453);const o={sidebar_position:4},l="External systems",c={},a=[{value:"Payment providers",id:"payment-providers",level:2},{value:"SMS providers",id:"sms-providers",level:2},{value:"Email and notifications",id:"email-and-notifications",level:2},{value:"Accounting and bookkeeping (optional)",id:"accounting-and-bookkeeping-optional",level:2},{value:"Design principles for external integrations",id:"design-principles-for-external-integrations",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"external-systems",children:"External systems"})}),"\n",(0,r.jsx)(n.p,{children:"The Just Driving platform can integrate with several categories of external systems to support real-world operations like payments, messaging, and bookkeeping. This section describes the integration points at a high level so you can plug in specific providers (Stripe, Twilio, local SMS gateways, accounting tools, etc.) as needed."}),"\n",(0,r.jsx)(n.h2,{id:"payment-providers",children:"Payment providers"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Used for: collecting lesson fees, deposits, package payments, or subscription-style charges."}),"\n",(0,r.jsx)(n.li,{children:"Typical options: Stripe, PayPal, local payment gateways, or provider-specific SDKs."}),"\n",(0,r.jsxs)(n.li,{children:["Integration pattern:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Backend: payment service class (e.g. ",(0,r.jsx)(n.code,{children:"App\\Services\\Payments\\PaymentGateway"}),") wrapping the provider SDK and exposing methods like ",(0,r.jsx)(n.code,{children:"createPaymentIntent"}),", ",(0,r.jsx)(n.code,{children:"chargeCustomer"}),", ",(0,r.jsx)(n.code,{children:"refund"}),", etc."]}),"\n",(0,r.jsx)(n.li,{children:"Frontend: checkout or payment UI (card details, wallet, etc.) calling backend endpoints."}),"\n",(0,r.jsx)(n.li,{children:"Database: records for transactions, invoices, refunds, and payment status linked to bookings/students."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Configuration:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["API keys and secrets stored in ",(0,r.jsx)(n.code,{children:".env"})," (",(0,r.jsx)(n.code,{children:"PAYMENT_PROVIDER_KEY"}),", ",(0,r.jsx)(n.code,{children:"PAYMENT_PROVIDER_SECRET"}),", etc.)."]}),"\n",(0,r.jsxs)(n.li,{children:["Optional webhook endpoint (e.g. ",(0,r.jsx)(n.code,{children:"/webhook/payments"}),") to receive asynchronous updates (success, failure, refund)."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"sms-providers",children:"SMS providers"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Used for: lesson reminders, booking confirmations, cancellations, and important announcements to students/instructors."}),"\n",(0,r.jsx)(n.li,{children:"Typical options: Twilio, local SMS gateways, or an SMS aggregation service."}),"\n",(0,r.jsxs)(n.li,{children:["Integration pattern:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Laravel notifications or a dedicated SMS service class (e.g. ",(0,r.jsx)(n.code,{children:"App\\Services\\Sms\\SmsSender"}),")."]}),"\n",(0,r.jsxs)(n.li,{children:["Single interface method such as ",(0,r.jsx)(n.code,{children:"send(to, message)"})," which hides provider-specific details."]}),"\n",(0,r.jsx)(n.li,{children:"Queue jobs for sending SMS asynchronously to avoid slowing down HTTP requests."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Configuration:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Provider credentials in ",(0,r.jsx)(n.code,{children:".env"})," (e.g. ",(0,r.jsx)(n.code,{children:"SMS_PROVIDER_KEY"}),", ",(0,r.jsx)(n.code,{children:"SMS_PROVIDER_SECRET"}),", ",(0,r.jsx)(n.code,{children:"SMS_FROM_NUMBER"}),")."]}),"\n",(0,r.jsxs)(n.li,{children:["Optional per-environment toggles to disable real SMS in local/staging (",(0,r.jsx)(n.code,{children:"SMS_ENABLED=false"})," in non-prod)."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"email-and-notifications",children:"Email and notifications"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Used for: welcome emails, booking confirmations, password resets, and administrative notifications."}),"\n",(0,r.jsxs)(n.li,{children:["Integration pattern:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Laravel\u2019s mail and notification system, plus any external email service (e.g. SMTP, Mailgun, SendGrid)."}),"\n",(0,r.jsxs)(n.li,{children:["Template-based emails stored in ",(0,r.jsx)(n.code,{children:"resources/views/emails"}),"."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Configuration:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:".env"})," variables (",(0,r.jsx)(n.code,{children:"MAIL_MAILER"}),", ",(0,r.jsx)(n.code,{children:"MAIL_HOST"}),", ",(0,r.jsx)(n.code,{children:"MAIL_PORT"}),", ",(0,r.jsx)(n.code,{children:"MAIL_USERNAME"}),", ",(0,r.jsx)(n.code,{children:"MAIL_PASSWORD"}),", etc.)."]}),"\n",(0,r.jsx)(n.li,{children:"Separate settings for staging vs production to avoid mailing real users from non-production environments."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"accounting-and-bookkeeping-optional",children:"Accounting and bookkeeping (optional)"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Used for: syncing financial data (invoices, payments, refunds) into an accounting system."}),"\n",(0,r.jsx)(n.li,{children:"Typical options: local accounting tools, cloud accounting (e.g. Xero, QuickBooks), or exported CSV integrations."}),"\n",(0,r.jsxs)(n.li,{children:["Integration pattern:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Service class (e.g. ",(0,r.jsx)(n.code,{children:"App\\Services\\Accounting\\AccountingClient"}),") responsible for:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Creating or updating customers (driving schools, individual students if applicable)."}),"\n",(0,r.jsx)(n.li,{children:"Sending invoice/payment records or periodic summaries."}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:"Scheduled commands to run sync jobs (e.g. daily, hourly)."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Configuration:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["API credentials in ",(0,r.jsx)(n.code,{children:".env"})," (",(0,r.jsx)(n.code,{children:"ACCOUNTING_API_KEY"}),", etc.)."]}),"\n",(0,r.jsx)(n.li,{children:"Feature flags to enable/disable accounting sync per environment."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"design-principles-for-external-integrations",children:"Design principles for external integrations"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"All external systems are accessed through dedicated service classes or adapters (no raw SDK calls scattered across controllers)."}),"\n",(0,r.jsx)(n.li,{children:"Configuration and credentials live in environment variables, never in source control."}),"\n",(0,r.jsx)(n.li,{children:"Webhooks (for payments or other providers) terminate in specific controllers and delegate to domain logic (e.g. updating booking payment status)."}),"\n",(0,r.jsx)(n.li,{children:"Logging and error handling are centralized to make it easy to diagnose integration problems without exposing sensitive data."}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>o,x:()=>l});var s=i(6540);const r={},t=s.createContext(r);function o(e){const n=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);