"use strict";(globalThis.webpackChunkjustdriving=globalThis.webpackChunkjustdriving||[]).push([[4563],{3424:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>l,contentTitle:()=>r,default:()=>h,frontMatter:()=>o,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"data/relationship","title":"Relationship Overview","description":"This page describes how the core entities in the Just Driving data model relate to each other. It focuses on the main domains (schools, users, education, bookings, and finance) to give new developers a mental map before they dive into detailed ER diagrams or table definitions.","source":"@site/docs/data/relationship.md","sourceDirName":"data","slug":"/data/relationship","permalink":"/docs/data/relationship","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/data/relationship.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Entities","permalink":"/docs/data/entities"},"next":{"title":"ER Diagrams","permalink":"/docs/data/er-diagram"}}');var i=n(4848),a=n(8453);const o={sidebar_position:2},r="Relationship Overview",l={},d=[{value:"High-level domain relationships",id:"high-level-domain-relationships",level:2},{value:"Core relationships (diagram)",id:"core-relationships-diagram",level:2},{value:"Schools, teachers, and students",id:"schools-teachers-and-students",level:2},{value:"Education, lesson plans, and pensum",id:"education-lesson-plans-and-pensum",level:2},{value:"Classes, bookings, and attendance",id:"classes-bookings-and-attendance",level:2},{value:"Invoices, payments, and balances",id:"invoices-payments-and-balances",level:2}];function c(e){const s={h1:"h1",h2:"h2",header:"header",li:"li",mermaid:"mermaid",p:"p",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.header,{children:(0,i.jsx)(s.h1,{id:"relationship-overview",children:"Relationship Overview"})}),"\n",(0,i.jsx)(s.p,{children:"This page describes how the core entities in the Just Driving data model relate to each other. It focuses on the main domains (schools, users, education, bookings, and finance) to give new developers a mental map before they dive into detailed ER diagrams or table definitions."}),"\n",(0,i.jsx)(s.h2,{id:"high-level-domain-relationships",children:"High-level domain relationships"}),"\n",(0,i.jsx)(s.p,{children:"At a high level, the system can be thought of as five main domains:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Schools and organization"})," \u2013 schools, departments, and links between schools, teachers, and students."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Users and actors"})," \u2013 admins, teachers, students, and their relationships to schools and classes."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Education and lesson plans"})," \u2013 lesson plans, modules, pensum, signatures, and education content."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Classes and bookings"})," \u2013 school classes, individual bookings, and links between bookings and students."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Finance and payments"})," \u2013 invoices, invoice items, payments, and balances for students and teachers."]}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:"These domains are connected so that:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"A school owns departments, teachers, students, classes, bookings, lesson plans, and financial records."}),"\n",(0,i.jsx)(s.li,{children:"Students belong to one or more schools and classes and participate in bookings that follow specific lesson plans."}),"\n",(0,i.jsx)(s.li,{children:"Teachers belong to schools and deliver lessons/bookings to students, which then drive salary/payment records."}),"\n",(0,i.jsx)(s.li,{children:"Invoices and payments are tied back to students, schools, and often specific products such as classes or booking types."}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"core-relationships-diagram",children:"Core relationships (diagram)"}),"\n",(0,i.jsx)(s.p,{children:"The diagram below shows a simplified view of key relationships between the main entities. It is not a full ER diagram, but it highlights the most important links."}),"\n",(0,i.jsx)(s.mermaid,{value:"erDiagram\r\n    SCHOOL ||--o{ SCHOOL_DEPARTMENT : has\r\n    SCHOOL ||--o{ SCHOOL_TEACHER : has\r\n    SCHOOL ||--o{ SCHOOL_STUDENT : has\r\n    SCHOOL ||--o{ SCHOOL_CLASS : has\r\n    SCHOOL ||--o{ BOOKING : has\r\n    SCHOOL ||--o{ LESSON_PLAN : has\r\n    SCHOOL ||--o{ STUDENT_INVOICE : has\r\n    SCHOOL ||--o{ STUDENT_PAYMENT : has\r\n    SCHOOL_DEPARTMENT ||--o{ SCHOOL_CLASS : has\r\n    SCHOOL_DEPARTMENT ||--o{ SCHOOL_TEACHER : has\r\n    SCHOOL_DEPARTMENT ||--o{ STUDENT : groups\r\n\r\n    SCHOOL_TEACHER }o--|| TEACHER : links\r\n    SCHOOL_STUDENT }o--|| STUDENT : links\r\n\r\n    SCHOOL_CLASS ||--o{ SCHOOL_CLASS_STUDENT : has\r\n    SCHOOL_CLASS_STUDENT }o--|| STUDENT : links\r\n\r\n    SCHOOL_CLASS ||--o{ BOOKING : schedules\r\n    TEACHER ||--o{ BOOKING : teaches\r\n    STUDENT ||--o{ BOOKING_STUDENT : attends\r\n    BOOKING ||--o{ BOOKING_STUDENT : has\r\n\r\n    LESSON_PLAN ||--o{ LESSON_PLAN_MODULE : has\r\n    LESSON_PLAN_MODULE ||--o{ LESSON_PLAN_MODULE_SIGNATURE : signed\r\n    STUDENT ||--o{ LESSON_PLAN_MODULE_SIGNATURE : signs\r\n    TEACHER ||--o{ LESSON_PLAN_MODULE_SIGNATURE : signs\r\n\r\n    STUDENT ||--o{ STUDENT_INVOICE : billed\r\n    STUDENT_INVOICE ||--o{ STUDENT_INVOICE_DATA : lines\r\n    STUDENT ||--o{ STUDENT_PAYMENT : pays\r\n    STUDENT_INVOICE ||--o{ STUDENT_PAYMENT : settles\r\n"}),"\n",(0,i.jsx)(s.p,{children:"You can refine naming to match your exact table and model names, but the structure reflects the main relationships."}),"\n",(0,i.jsx)(s.h2,{id:"schools-teachers-and-students",children:"Schools, teachers, and students"}),"\n",(0,i.jsx)(s.p,{children:"Key relationships between schools, teachers, and students:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["A ",(0,i.jsx)(s.strong,{children:"school"})," can have many ",(0,i.jsx)(s.strong,{children:"departments"}),"."]}),"\n",(0,i.jsxs)(s.li,{children:["A ",(0,i.jsx)(s.strong,{children:"school"})," can have many ",(0,i.jsx)(s.strong,{children:"teachers"})," via the school\u2013teacher link."]}),"\n",(0,i.jsxs)(s.li,{children:["A ",(0,i.jsx)(s.strong,{children:"school"})," can have many ",(0,i.jsx)(s.strong,{children:"students"})," via the school\u2013student link."]}),"\n",(0,i.jsxs)(s.li,{children:["A ",(0,i.jsx)(s.strong,{children:"department"})," can group teachers and students under the school (for example, different branches or locations)."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Students"})," and ",(0,i.jsx)(s.strong,{children:"teachers"})," are linked to schools through join tables so the same person could theoretically be associated with multiple schools if needed."]}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:"This structure supports multi-tenant behavior, where each school keeps its own staff, students, classes, and configuration isolated from others."}),"\n",(0,i.jsx)(s.h2,{id:"education-lesson-plans-and-pensum",children:"Education, lesson plans, and pensum"}),"\n",(0,i.jsx)(s.p,{children:"Key relationships in the education domain:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["A ",(0,i.jsx)(s.strong,{children:"lesson plan"})," belongs to a school (or is derived from a default template) and is used by one or more classes."]}),"\n",(0,i.jsxs)(s.li,{children:["A ",(0,i.jsx)(s.strong,{children:"lesson plan"})," has many ",(0,i.jsx)(s.strong,{children:"modules"})," (theory and practical segments), and each module can be linked to multiple ",(0,i.jsx)(s.strong,{children:"pensum"})," entries that define legal or curriculum requirements."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Signatures"})," link students and teachers to specific lesson plan modules, recording when modules are taught, repeated, and acknowledged."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Default lesson plans"})," and ",(0,i.jsx)(s.strong,{children:"default lesson plan modules"})," act as reusable templates that can be attached to booking types or schools to standardize teaching structures."]}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:"This allows the system to track not just that a student attended a lesson, but which curriculum elements were completed and signed off."}),"\n",(0,i.jsx)(s.h2,{id:"classes-bookings-and-attendance",children:"Classes, bookings, and attendance"}),"\n",(0,i.jsx)(s.p,{children:"Key relationships around scheduling:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["A ",(0,i.jsx)(s.strong,{children:"school class"})," belongs to a school and optionally to a department and lesson plan. It represents a group of students following a schedule."]}),"\n",(0,i.jsxs)(s.li,{children:["A ",(0,i.jsx)(s.strong,{children:"school class"})," has many students through the school\u2013class\u2013student link."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Bookings"})," represent concrete scheduled events (for example, a practical driving lesson or theory session) and belong to a school and a teacher."]}),"\n",(0,i.jsxs)(s.li,{children:["A booking has a ",(0,i.jsx)(s.strong,{children:"booking type"}),", which defines its pricing, salary rules, and other behavior."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Students"})," join bookings through a booking\u2013student link table, which lets multiple students be assigned to the same booking (for example, group theory or car-sharing)."]}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:"This design separates the concept of a class (a course cohort) from bookings (individual time slots and events)."}),"\n",(0,i.jsx)(s.h2,{id:"invoices-payments-and-balances",children:"Invoices, payments, and balances"}),"\n",(0,i.jsx)(s.p,{children:"Key relationships in finance:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["A ",(0,i.jsx)(s.strong,{children:"student invoice"})," belongs to a school, a student, and often a teacher (or product reference)."]}),"\n",(0,i.jsxs)(s.li,{children:["An invoice has many ",(0,i.jsx)(s.strong,{children:"invoice data/line items"}),", each describing a specific service or fee (including cancellation fees if applicable)."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Student payments"})," belong to a school, a student, and reference a specific invoice (or subscription ID)."]}),"\n",(0,i.jsxs)(s.li,{children:["Student balances can be derived from the combined history of invoices and payments, and are often cached in a dedicated ",(0,i.jsx)(s.strong,{children:"student balance"})," entity."]}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:"This allows the system to track what each student owes, what has been paid, and how that ties back to specific classes, bookings, or products."})]})}function h(e={}){const{wrapper:s}={...(0,a.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},8453:(e,s,n)=>{n.d(s,{R:()=>o,x:()=>r});var t=n(6540);const i={},a=t.createContext(i);function o(e){const s=t.useContext(a);return t.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function r(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),t.createElement(a.Provider,{value:s},e.children)}}}]);