"use strict";(globalThis.webpackChunkjustdriving=globalThis.webpackChunkjustdriving||[]).push([[3208],{2259:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>t,default:()=>h,frontMatter:()=>o,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"data/indexing","title":"Indexing strategies","description":"This section describes general indexing strategies suitable for the Just Driving MySQL schema (bookings, students, teachers, classes, payments), so queries stay fast as data grows.","source":"@site/docs/data/indexing.md","sourceDirName":"data","slug":"/data/indexing","permalink":"/docs/data/indexing","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/data/indexing.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4},"sidebar":"tutorialSidebar","previous":{"title":"Relationship overview","permalink":"/docs/data/relationship"},"next":{"title":"Permissions Matrix","permalink":"/docs/category/permissions-matrix"}}');var r=s(4848),d=s(8453);const o={sidebar_position:4},t="Indexing strategies",l={},a=[{value:"General principles",id:"general-principles",level:2},{value:"Recommended indexes for core entities",id:"recommended-indexes-for-core-entities",level:2},{value:"Operational hints",id:"operational-hints",level:2}];function c(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,d.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"indexing-strategies",children:"Indexing strategies"})}),"\n",(0,r.jsx)(n.p,{children:"This section describes general indexing strategies suitable for the Just Driving MySQL schema (bookings, students, teachers, classes, payments), so queries stay fast as data grows."}),"\n",(0,r.jsx)(n.h2,{id:"general-principles",children:"General principles"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Always have primary keys on all tables (already true in a standard Laravel schema)."}),"\n",(0,r.jsx)(n.li,{children:"Ensure all foreign key columns that appear in JOINs or WHERE clauses are indexed."}),"\n",(0,r.jsx)(n.li,{children:"Add composite indexes for the most common query patterns (e.g. \u201cbookings by school + date range + status\u201d)."}),"\n",(0,r.jsx)(n.li,{children:"Avoid adding \u201crandom\u201d indexes; every index should support a known query pattern."}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"recommended-indexes-for-core-entities",children:"Recommended indexes for core entities"}),"\n",(0,r.jsxs)(n.p,{children:["You can adapt the names to your own style (",(0,r.jsx)(n.code,{children:"idx_*"})," or Laravel\u2019s default index names)."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Bookings (table ",(0,r.jsx)(n.code,{children:"bookings"}),")"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Typical queries: upcoming bookings for a teacher, bookings for a class, school-wide calendar views, filtering by status and date."}),"\n",(0,r.jsxs)(n.li,{children:["Recommended:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Index on ",(0,r.jsx)(n.code,{children:"(teacher_id, start)"})," for \u201cteacher calendar\u201d queries."]}),"\n",(0,r.jsxs)(n.li,{children:["Index on ",(0,r.jsx)(n.code,{children:"(school_id, start)"})," for school-wide planning."]}),"\n",(0,r.jsxs)(n.li,{children:["Index on ",(0,r.jsx)(n.code,{children:"(school_class_id, start)"})," if class-based views are common."]}),"\n",(0,r.jsxs)(n.li,{children:["Optional: ",(0,r.jsx)(n.code,{children:"(status, start)"})," if you frequently filter by status and date (e.g. only confirmed upcoming bookings)."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Example:"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mysql",children:"CREATE INDEX idx_bookings_teacher_start\r\nON bookings (teacher_id, start);\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mysql",children:"CREATE INDEX idx_bookings_school_start\r\nON bookings (school_id, start);\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mysql",children:"CREATE INDEX idx_bookings_class_start\r\nON bookings (school_class_id, start);\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Booking\u2013student relation (table ",(0,r.jsx)(n.code,{children:"booking_student"}),")"]}),"\n",(0,r.jsx)(n.li,{children:"Typical queries: list students per booking, find all bookings for a student."}),"\n",(0,r.jsxs)(n.li,{children:["Recommended:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Index on ",(0,r.jsx)(n.code,{children:"booking_id"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["Index on ",(0,r.jsx)(n.code,{children:"student_id"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mysql",children:"CREATE INDEX idx_booking_student_booking\r\nON booking_student (booking_id);\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mysql",children:"CREATE INDEX idx_booking_student_student\r\nON booking_student (student_id);\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Students and teachers (tables ",(0,r.jsx)(n.code,{children:"students"}),", ",(0,r.jsx)(n.code,{children:"teachers"}),")"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Typical queries: look up by school and name/email, list all for a school."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Recommended:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Index on ",(0,r.jsx)(n.code,{children:"(school_id)"})," for both."]}),"\n",(0,r.jsxs)(n.li,{children:["Optional: composite index on ",(0,r.jsx)(n.code,{children:"(school_id, last_name)"})," or ",(0,r.jsx)(n.code,{children:"(school_id, email)"})," if those searches are common."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["School classes (table ",(0,r.jsx)(n.code,{children:"school_classes"}),")"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Typical queries: upcoming/active classes per school or department."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Recommended:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Index on ",(0,r.jsx)(n.code,{children:"(school_id, start_date)"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["Optional: ",(0,r.jsx)(n.code,{children:"(school_id, status, start_date)"})," if you often filter on active/completed."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Payments (table ",(0,r.jsx)(n.code,{children:"payments"})," or equivalent)"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Typical queries: payments per booking, per school, per date range and status."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Recommended:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Index on ",(0,r.jsx)(n.code,{children:"booking_id"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["Optional: ",(0,r.jsx)(n.code,{children:"(status, created_at)"})," or ",(0,r.jsx)(n.code,{children:"(school_id, created_at)"})," for financial reports."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"operational-hints",children:"Operational hints"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Use ",(0,r.jsx)(n.code,{children:"EXPLAIN"})," on your slow queries to verify that MySQL actually uses the indexes you add."]}),"\n",(0,r.jsx)(n.li,{children:"Revisit indexing when introducing new features or heavy reports (e.g. monthly payroll or revenue dashboards)."}),"\n",(0,r.jsx)(n.li,{children:"Be mindful that each additional index adds write overhead; prioritize indexes that clearly support your most frequent and most expensive queries."}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"You can refine this section further by listing specific queries (SQL or Eloquent) and matching them to the index that supports them."})]})}function h(e={}){const{wrapper:n}={...(0,d.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>o,x:()=>t});var i=s(6540);const r={},d=i.createContext(r);function o(e){const n=i.useContext(d);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),i.createElement(d.Provider,{value:n},e.children)}}}]);