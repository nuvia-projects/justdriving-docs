"use strict";(globalThis.webpackChunkjustdriving=globalThis.webpackChunkjustdriving||[]).push([[349],{5105:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"architecture/backend","title":"Backend Structure","description":"This page describes how the backend of Just Driving is structured. It focuses on the main Laravel components (controllers, models, jobs, etc.) and how they are organized into areas that match the different users and features of the system.","source":"@site/docs/architecture/backend.md","sourceDirName":"architecture","slug":"/architecture/backend","permalink":"/docs/architecture/backend","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/architecture/backend.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"High-Level System Diagram","permalink":"/docs/architecture/diagram"},"next":{"title":"Frontend Structure","permalink":"/docs/architecture/frontend"}}');var t=s(4848),i=s(8453);const o={sidebar_position:2},a="Backend Structure",l={},d=[{value:"Overview",id:"overview",level:2},{value:"Controllers",id:"controllers",level:2},{value:"Views",id:"views",level:2},{value:"Models and domains",id:"models-and-domains",level:2},{value:"Jobs, events, and queues",id:"jobs-events-and-queues",level:2},{value:"Configuration and services",id:"configuration-and-services",level:2}];function c(e){const n={br:"br",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"backend-structure",children:"Backend Structure"})}),"\n",(0,t.jsx)(n.p,{children:"This page describes how the backend of Just Driving is structured. It focuses on the main Laravel components (controllers, models, jobs, etc.) and how they are organized into areas that match the different users and features of the system."}),"\n",(0,t.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,t.jsx)(n.p,{children:"The backend is a Laravel 8 application. It follows Laravel\u2019s standard directory layout, with some additional structure around controllers and views to separate concerns by user type and area of the system."}),"\n",(0,t.jsx)(n.p,{children:"At a high level:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Controllers are grouped into namespaces based on who uses a given part of the system (Admin, School, Student, Web, Api)."}),"\n",(0,t.jsx)(n.li,{children:"Views follow the same grouping so it is easy to find the templates that belong to a given controller."}),"\n",(0,t.jsxs)(n.li,{children:["REST-style controllers are used where possible, with conventional actions like ",(0,t.jsx)(n.code,{children:"index"}),", ",(0,t.jsx)(n.code,{children:"show"}),", ",(0,t.jsx)(n.code,{children:"create"}),", ",(0,t.jsx)(n.code,{children:"store"}),", ",(0,t.jsx)(n.code,{children:"edit"}),", ",(0,t.jsx)(n.code,{children:"update"}),", and ",(0,t.jsx)(n.code,{children:"destroy"}),"."]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"controllers",children:"Controllers"}),"\n",(0,t.jsxs)(n.p,{children:["Controllers live under ",(0,t.jsx)(n.code,{children:"App\\Http\\Controllers"})," and are grouped by area:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"App\\Http\\Controllers\\Admin"}),(0,t.jsx)(n.br,{}),"\n","Controllers for the global admin area (platform administration and configuration)."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"App\\Http\\Controllers\\Api"}),(0,t.jsx)(n.br,{}),"\n","Controllers that expose JSON APIs for internal and external integrations."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"App\\Http\\Controllers\\School"}),(0,t.jsx)(n.br,{}),"\n","Controllers for features used by school staff (school owners, office staff, teachers under a school)."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"App\\Http\\Controllers\\Student"}),(0,t.jsx)(n.br,{}),"\n","Controllers for the student-facing part of the application (student dashboards, bookings, payments)."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"App\\Http\\Controllers\\Web"}),(0,t.jsx)(n.br,{}),"\n","Controllers for public-facing pages that do not require authentication (marketing pages, public signup flows, etc.)."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"New controllers should be placed in the namespace that matches the primary user and route area they serve."}),"\n",(0,t.jsx)(n.h2,{id:"views",children:"Views"}),"\n",(0,t.jsx)(n.p,{children:"Views are implemented using Blade templates and are structured to mirror the controller namespaces:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"resources/views/admin/..."})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"resources/views/school/..."})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"resources/views/student/..."})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"resources/views/web/..."})}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"When you add a new controller action that returns a view, its template should be placed in the matching directory so it is easy to locate from the controller."}),"\n",(0,t.jsx)(n.h2,{id:"models-and-domains",children:"Models and domains"}),"\n",(0,t.jsx)(n.p,{children:"Eloquent models represent the main business entities in the database, such as:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Schools, departments, teachers, and students."}),"\n",(0,t.jsx)(n.li,{children:"Bookings, booking types, and classes."}),"\n",(0,t.jsx)(n.li,{children:"Lesson plans, modules, pensum, and education content."}),"\n",(0,t.jsx)(n.li,{children:"Invoices, invoice items, student balances, and payments."}),"\n",(0,t.jsx)(n.li,{children:"Notifications and settings for email/SMS."}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["Models live under ",(0,t.jsx)(n.code,{children:"App\\Models"})," (or ",(0,t.jsx)(n.code,{children:"App\\"})," in older parts of the codebase) and are linked together using Eloquent relationships (for example, a school has many students and teachers, a student has many bookings and invoices, etc.). When adding new logic, prefer to reuse existing models and relationships instead of duplicating queries."]}),"\n",(0,t.jsx)(n.h2,{id:"jobs-events-and-queues",children:"Jobs, events, and queues"}),"\n",(0,t.jsx)(n.p,{children:"Background work is handled using Laravel\u2019s queue system (with Redis as the queue backend). Typical use cases include:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Sending emails and SMS notifications."}),"\n",(0,t.jsx)(n.li,{children:"Processing asynchronous tasks that should not block HTTP requests."}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["Jobs normally live under ",(0,t.jsx)(n.code,{children:"App\\Jobs"}),", and may be dispatched from controllers, event listeners, or model hooks. When you introduce work that is potentially slow or external (e.g. network calls), consider wrapping it in a job and running it via the queue."]}),"\n",(0,t.jsx)(n.h2,{id:"configuration-and-services",children:"Configuration and services"}),"\n",(0,t.jsxs)(n.p,{children:["Configuration for external services (Twilio, Stripe, Mailtrap, SparkPost, etc.) is managed via environment variables (",(0,t.jsx)(n.code,{children:".env"}),") and Laravel config files in ",(0,t.jsx)(n.code,{children:"config/"}),". Service classes, if present, wrap third-party SDKs or APIs to keep controllers and jobs focused on application logic rather than low-level integration details."]}),"\n",(0,t.jsx)(n.p,{children:"When adding new integrations:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Add configuration keys under ",(0,t.jsx)(n.code,{children:"config/"})," and ",(0,t.jsx)(n.code,{children:".env.example"}),"."]}),"\n",(0,t.jsx)(n.li,{children:"Encapsulate external API calls in dedicated classes or services."}),"\n",(0,t.jsx)(n.li,{children:"Use jobs where appropriate so slow calls are done in the background."}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>o,x:()=>a});var r=s(6540);const t={},i=r.createContext(t);function o(e){const n=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);